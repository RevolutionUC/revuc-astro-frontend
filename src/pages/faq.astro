---
import ResponsiveNav from "../components/ResponsiveNav.astro";
import HTMLWrapper from "../layouts/HTMLWrapper.astro";
import faqData from "../data/faqData.json";
import Footer from "../components/Footer.astro";
import "../styles/faq.styles.css";
---

<HTMLWrapper title="FAQ">
  <ResponsiveNav current="faq" />
  <main class="mt-24 flex h-full justify-center">
    <div class="mb-8 ml-8 mr-8 w-full lg:w-3/5 xl:w-2/5">
      <img
        src="/images/faq-1.jpg"
        alt="faq image"
        class="w-full"
        decoding="async"
        loading="eager"
        onerror="this.style.display='none'"
      />
      <h1 class="faq-title">FAQ</h1>
      <p class="mt-4 text-lg underline">
        <small>
          <a href="#" class="expand-all">Expand all</a> | <a href="#" class="collapse-all">Collapse all</a>
        </small>
      </p>
      <script defer>
        const btnExpand = document.querySelector("a.expand-all");
        btnExpand?.addEventListener("click", () => {
          document.querySelectorAll("details").forEach((detail) => {
            detail.open = true;
          });
        });

        const btnCollapse = document.querySelector("a.collapse-all");
        btnCollapse?.addEventListener("click", () => {
          document.querySelectorAll("details").forEach((detail) => {
            detail.open = false;
          });
        });
      </script>

      <div class="faq-container">
        <div class="faq-section">
          <h2 class="faq-section-title">General Information</h2>
          {
            faqData.slice(0, 5).map((faq) => (
              <details class="my-4 cursor-pointer">
                <summary class="my-2 font-black">{faq.q}</summary>
                <div set:html={faq.a} />
              </details>
            ))
          }
        </div>

        <div class="faq-section">
          <h2 class="faq-section-title">Participation and Preparation</h2>
          {
            faqData.slice(5, 11).map((faq) => (
              <details class="my-4 cursor-pointer">
                <summary class="my-2 font-black">{faq.q}</summary>
                <div set:html={faq.a} />
              </details>
            ))
          }
        </div>

        <div class="faq-section">
          <h2 class="faq-section-title">Policies and Support</h2>
          {
            faqData.slice(11, 14).map((faq) => (
              <details class="my-4 cursor-pointer">
                <summary class="my-2 font-black">{faq.q}</summary>
                <div set:html={faq.a} />
              </details>
            ))
          }
        </div>
      </div>
    </div>
  </main>
  <Footer />
</HTMLWrapper>